# =============================================================================
# .shellcheckrc - ShellCheck configuration for shell-spec
# =============================================================================
#
# ShellCheck is a static analysis tool for shell scripts.
# https://www.shellcheck.net/
#
# This configuration is applied to all .sh files in the repository.
# Per-file overrides can be added with inline directives:
#   # shellcheck disable=SC2086
#
# =============================================================================

# Default shell dialect
# Options: sh, bash, dash, ksh
# shell-spec primarily targets bash, but aims for broad compatibility
shell=bash

# Minimum severity to report
# Options: error, warning, info, style
severity=warning

# Disabled checks
# ─────────────────────────────────────────────────────────────────────────────
# SC2034 - Variable appears unused
#   Reason: Test frameworks often define variables for later assertion
#   Example: expected="foo"; assert_equals "$expected" "$actual"
#
# SC2155 - Declare and assign separately to avoid masking return values
#   Reason: Stylistic preference; our assignments don't need return values
#   Example: local result=$(some_function)
#
# SC2181 - Check exit code directly with 'if cmd;', not indirectly with $?
#   Reason: We often capture $? for multiple uses or readable comparisons
#   Example: cmd; exit_code=$?; if [ $exit_code -eq 0 ]; ...
#
# SC1090 - Can't follow non-constant source
#   Reason: Dynamic sourcing is intentional in test framework
#   Example: source "$SCRIPT_DIR/assertions.sh"
#
# SC1091 - Not following sourced file (file not found)
#   Reason: CI may not have all files in expected locations
#
# SC2124 - Assigning an array to a string
#   Reason: Intentional for capturing command strings
#
# SC2250 - Prefer ${var} over $var
#   Reason: Too noisy for existing codebase, can enable later
#
# SC2004 - $/${} is unnecessary on arithmetic variables
#   Reason: Style preference, braces are clearer
#
# SC2163 - This does not export 'cmd_name'
#   Reason: export -f "$var" is intentional for function export
#
# SC2188 - Redirection without command
#   Reason: `> file` to truncate is valid idiom
#
# SC2295 - Expansions inside ${..} need quotes
#   Reason: Pattern matching is intentional
#
# SC2317 - Unreachable code
#   Reason: return || exit pattern for sourced vs executed
#
# SC2016 - Single quotes don't expand
#   Reason: Intentional in test assertions
#
# SC2329 - Function never invoked
#   Reason: Test helper functions invoked dynamically
#
disable=SC2034,SC2155,SC2181,SC1090,SC1091,SC2124,SC2250,SC2004,SC2163,SC2188,SC2295,SC2317,SC2016,SC2329

# Enabled optional checks
# ─────────────────────────────────────────────────────────────────────────────
# require-variable-braces - Require ${var} instead of $var
#   Disabled: Too noisy for existing codebase. Enable after incremental cleanup.
#
# enable=require-variable-braces

# External sources
# Allow shellcheck to follow source directives
external-sources=true
